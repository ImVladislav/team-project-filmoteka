function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},o=t.parcelRequire62bd;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},t.parcelRequire62bd=o),o("bTcpz");var i,s,a,l,c=o("3fz09"),u=o("185lj"),d=o("fb9GJ"),f=(c=o("3fz09"),u=o("185lj"),o("1fedI")),p=o("2nhTy"),h=o("bRnc2"),m=(h=o("bRnc2"),{});i=m,s="Spinner",a=function(){return g},l=function(e){return g=e},Object.defineProperty(i,s,{get:a,set:l,enumerable:!0,configurable:!0});var v=function(){return v=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},v.apply(this,arguments)},b={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",fadeColor:"transparent",animation:"spinner-line-fade-default",rotate:0,direction:1,speed:1,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:"0 0 1px transparent",position:"absolute"},g=function(){function e(e){void 0===e&&(e={}),this.opts=v(v({},b),e)}return e.prototype.spin=function(e){return this.stop(),this.el=document.createElement("div"),this.el.className=this.opts.className,this.el.setAttribute("role","progressbar"),y(this.el,{position:this.opts.position,width:0,zIndex:this.opts.zIndex,left:this.opts.left,top:this.opts.top,transform:"scale("+this.opts.scale+")"}),e&&e.insertBefore(this.el,e.firstChild||null),function(e,t){var n=Math.round(t.corners*t.width*500)/1e3+"px",r="none";!0===t.shadow?r="0 2px 4px #000":"string"==typeof t.shadow&&(r=t.shadow);for(var o=function(e){for(var t=/^\s*([a-zA-Z]+\s+)?(-?\d+(\.\d+)?)([a-zA-Z]*)\s+(-?\d+(\.\d+)?)([a-zA-Z]*)(.*)$/,n=[],r=0,o=e.split(",");r<o.length;r++){var i=o[r].match(t);if(null!==i){var s=+i[2],a=+i[5],l=i[4],c=i[7];0!==s||l||(l=c),0!==a||c||(c=l),l===c&&n.push({prefix:i[1]||"",x:s,y:a,xUnits:l,yUnits:c,end:i[8]})}}return n}(r),i=0;i<t.lines;i++){var s=~~(360/t.lines*i+t.rotate),a=y(document.createElement("div"),{position:"absolute",top:-t.width/2+"px",width:t.length+t.width+"px",height:t.width+"px",background:w(t.fadeColor,i),borderRadius:n,transformOrigin:"left",transform:"rotate("+s+"deg) translateX("+t.radius+"px)"}),l=i*t.direction/t.lines/t.speed;l-=1/t.speed;var c=y(document.createElement("div"),{width:"100%",height:"100%",background:w(t.color,i),borderRadius:n,boxShadow:x(o,s),animation:1/t.speed+"s linear "+l+"s infinite "+t.animation});a.appendChild(c),e.appendChild(a)}}(this.el,this.opts),this},e.prototype.stop=function(){return this.el&&("undefined"!=typeof requestAnimationFrame?cancelAnimationFrame(this.animateId):clearTimeout(this.animateId),this.el.parentNode&&this.el.parentNode.removeChild(this.el),this.el=void 0),this},e}();function y(e,t){for(var n in t)e.style[n]=t[n];return e}function w(e,t){return"string"==typeof e?e:e[t%e.length]}function x(e,t){for(var n=[],r=0,o=e;r<o.length;r++){var i=o[r],s=L(i.x,i.y,t);n.push(i.prefix+s[0]+i.xUnits+" "+s[1]+i.yUnits+i.end)}return n.join(", ")}function L(e,t,n){var r=n*Math.PI/180,o=Math.sin(r),i=Math.cos(r);return[Math.round(1e3*(e*i+t*o))/1e3,Math.round(1e3*(-e*o+t*i))/1e3]}c=o("3fz09");const E=new(0,m.Spinner)({lines:14,length:27,width:20,radius:33,scale:1.95,corners:1,speed:1,rotate:18,animation:"spinner-line-shrink",direction:1,color:"#ff6b08",fadeColor:"transparent",top:"49%",left:"50%",shadow:"0 0 1px transparent",zIndex:2e9,className:"spinner",position:"absolute"}).spin(c.refs.spinner);function _(){E.spin(c.refs.spinner),c.refs.load.classList.remove("is-hidden")}function C(){c.refs.load.classList.add("is-hidden"),E.stop()}const T=document.querySelector(".tui-pagination"),A=new(e(d))(T,p.options);function M(e){const t=e.map((({original_title:e,title:t,poster_path:n,id:r,genre_ids:o,release_date:i})=>{const s=(0,f.posterÐ¡heck)(n);let a=null,l=null;const c=h.genresArr.reduce(((e,t)=>(o.includes(t.id)&&e.push(t.name),e)),[]);return c.length>3?(a=c.slice(0,2),a.splice(2,1,"Other")):a=0===c.length?["Genres not found"]:c,l=""===i?"Release data no found":i.slice(0,4),`\n        <li class="film__item" data-id="${r}">\n        <img src="${s}" class="film__img" alt="${e}" />\n        <p class="film__title">${t}</p>\n        <p class="film__genre">${a.join(", ")} | ${l}</p>\n      </li>`})).join("");return c.refs.gallery.innerHTML=t}async function S(){const e=await u.serverApi.getPopularMovie(),t=e.total_results;u.serverApi.setTotalResults(t),M(e.results),C()}_(),A.on("beforeMove",(async e=>{_(),A.setTotalItems(u.serverApi.totalResults);const t=e.page;u.serverApi.setPage(t),S()}));var N=o("it60l"),q=o("bTcpz"),k=o("9Co7P"),O=o("lFT8c"),j={};j=function e(t,n,r){function o(s,a){if(!n[s]){if(!t[s]){var l=void 0;if(!a&&l)return l(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[s]={exports:{}};t[s][0].call(u.exports,(function(e){return o(t[s][1][e]||e)}),u,u.exports,e,t,n,r)}return n[s].exports}for(var i=void 0,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.create=n.visible=void 0;var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=document.createElement("div");return n.innerHTML=e.trim(),!0===t?n.children:n.firstChild},o=function(e,t){var n=e.children;return 1===n.length&&n[0].tagName===t},i=function(e){return null!=(e=e||document.querySelector(".basicLightbox"))&&!0===e.ownerDocument.body.contains(e)};n.visible=i,n.create=function(e,t){var n=function(e,t){var n=r('\n\t\t<div class="basicLightbox '.concat(t.className,'">\n\t\t\t<div class="basicLightbox__placeholder" role="dialog"></div>\n\t\t</div>\n\t')),i=n.querySelector(".basicLightbox__placeholder");e.forEach((function(e){return i.appendChild(e)}));var s=o(i,"IMG"),a=o(i,"VIDEO"),l=o(i,"IFRAME");return!0===s&&n.classList.add("basicLightbox--img"),!0===a&&n.classList.add("basicLightbox--video"),!0===l&&n.classList.add("basicLightbox--iframe"),n}(e=function(e){var t="string"==typeof e,n=e instanceof HTMLElement==1;if(!1===t&&!1===n)throw new Error("Content must be a DOM element/node or string");return!0===t?Array.from(r(e,!0)):"TEMPLATE"===e.tagName?[e.content.cloneNode(!0)]:Array.from(e.children)}(e),t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null==(e=Object.assign({},e)).closable&&(e.closable=!0),null==e.className&&(e.className=""),null==e.onShow&&(e.onShow=function(){}),null==e.onClose&&(e.onClose=function(){}),"boolean"!=typeof e.closable)throw new Error("Property `closable` must be a boolean");if("string"!=typeof e.className)throw new Error("Property `className` must be a string");if("function"!=typeof e.onShow)throw new Error("Property `onShow` must be a function");if("function"!=typeof e.onClose)throw new Error("Property `onClose` must be a function");return e}(t)),s=function(e){return!1!==t.onClose(a)&&function(e,t){return e.classList.remove("basicLightbox--visible"),setTimeout((function(){return!1===i(e)||e.parentElement.removeChild(e),t()}),410),!0}(n,(function(){if("function"==typeof e)return e(a)}))};!0===t.closable&&n.addEventListener("click",(function(e){e.target===n&&s()}));var a={element:function(){return n},visible:function(){return i(n)},show:function(e){return!1!==t.onShow(a)&&function(e,t){return document.body.appendChild(e),setTimeout((function(){requestAnimationFrame((function(){return e.classList.add("basicLightbox--visible"),t()}))}),10),!0}(n,(function(){if("function"==typeof e)return e(a)}))},close:s};return a}},{}]},{},[1])(1),o("3fz09");u=o("185lj");const R=async e=>{_();const t=document.querySelector(".movie__description").dataset.movieId;let n="";u.serverApi.getTrailer(t).then((({results:e})=>{e.map((e=>{"Trailer"===e.type&&"Official Trailer"===e.name&&(n=e.key)}));const t=j.create(`\n        <div class="player-container">\n   <iframe class="player" src='https://www.youtube.com/embed/${n}'frameborder="0" \n\n    spinnerStop();\n   \n   allow="accelerometer; autoplay; encrypted-media; gyroscope; \n   picture-in-picture" allowfullscreen></iframe> \n   </div>\n`);t.show();document.querySelector('[data-action="close-lightbox"]').addEventListener("click",(()=>t.close()))}))};S(),c.refs.gallery.addEventListener("click",(async function(e){if("film__item"!==e.target.parentElement.className)return;(0,q.onOpenModal)(),_();const t=e.target.parentElement.dataset.id,n=await u.serverApi.getDetailsMovie(t),r=await(0,N.movieDescriptionMurkup)(n);c.refs.movieDescription.insertAdjacentHTML("beforeend",r),C(),(0,O.makeWatchTextContent)(n),(0,O.makeQueueTextContent)(n);const o=document.querySelector("[data-add-watched]"),i=document.querySelector("[data-add-queue]"),s=document.querySelector("[data-modal-close]"),a=document.querySelector(".btn-ytb");o.addEventListener("click",(()=>(0,k.onAddWatchClick)(n))),i.addEventListener("click",(()=>(0,k.onAddQueueClick)(n))),a.addEventListener("click",R),s.addEventListener("click",q.closeModal)}));var z=o("eWCmQ");d=o("fb9GJ"),c=o("3fz09"),u=o("185lj"),p=o("2nhTy");let I=" ";async function P(){const t=await u.serverApi.getMovieOnDemand(I),n=t.results,r=t.total_results;if(p.options.totalItems=r,r<20){document.querySelector(".tui-js").classList.add("visually-hidden")}else{document.querySelector(".tui-js").classList.remove("visually-hidden")}if(0===n.length)return e(z).Notify.failure("Search result not successful. Enter the correct movie name and",{position:"center-top",fontFamily:"inherit",borderRadius:"25px",clickToClose:!0}),void(I=" ");M(n)}c.refs.formRef.addEventListener("submit",(async function(t){t.preventDefault(),_();if(document.querySelector(".header__form-input").addEventListener("change",(()=>{u.serverApi.setPage(1),u.serverApi.setRequestCount()})),I=t.currentTarget.elements.serch_film.value.trim().toLowerCase(),!I)return void e(z).Notify.failure("Enter the name of the movie",{position:"center-top",fontFamily:"inherit",borderRadius:"25px",clickToClose:!0});await P(),C();const n=document.querySelector(".tui-pagination");new(e(d))(n,p.options).on("beforeMove",(e=>{const t=e.page;u.serverApi.setPage(t),u.serverApi.incrementRequestCount(),P()}))})),o("2nhTy"),o("7bYU0"),o("eobyt"),o("3TU0j"),o("3hXKf");
//# sourceMappingURL=index.9388ac42.js.map
