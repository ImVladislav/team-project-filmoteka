{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-dae15f3ea5b72565.js","src/index.js","src/js/utilitiesJS/selectLang.js","src/js/utilitiesJS/selectTrend.js","src/js/utilitiesJS/murkupGalleryOnPageLoading.js","node_modules/@parcel/runtime-js/lib/runtime-25d2c561babacffc.js","src/js/gallery.js","src/js/onSearchForm.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"5ZPII\\\":\\\"index.a10108b5.js\\\",\\\"bRNsJ\\\":\\\"warship.6c844eb5.jpg\\\",\\\"5UbS1\\\":\\\"index.cc02547b.css\\\",\\\"5fZck\\\":\\\"index.9407de05.js\\\"}\"));","import './js/modal';\nimport './js/utilitiesJS/selectLang';\nimport './js/utilitiesJS/selectTrend';\nimport './js/gallery';\nimport './js/onSearchForm';\nimport './js/pagination';\nimport './js/modal-team';\nimport './js/theme-dark';\nimport './js/treiler';\nimport './js/scrollTop';\nimport './js/modal-login';\nimport './js/spinner';\nimport './js/firebase';\n","import { serverApi } from './serverApi';\nimport { refs } from './refs';\n\nrefs.langValue.addEventListener('change', onSelectChange);\n\nif (localStorage.getItem('language')) {\n  const parsedData = JSON.parse(localStorage.getItem('language'));\n  refs.langValue.value = parsedData;\n  serverApi.setlang(parsedData);\n}\n\nfunction onSelectChange(evt) {\n  const language = evt.target.value;\n\n  serverApi.setlang(language);\n\n  localStorage.setItem('language', JSON.stringify(language));\n\n  location.reload();\n}\n","import { serverApi } from './serverApi';\nimport { refs } from './refs';\n\nrefs.trend.addEventListener('change', onSelectChange);\n\nif (localStorage.getItem('selected-trend')) {\n  const parsedData = JSON.parse(localStorage.getItem('selected-trend'));\n  refs.trend.value = parsedData;\n  serverApi.setTrend(parsedData);\n}\n\nfunction onSelectChange(evt) {\n  const trend = evt.target.value;\n\n  serverApi.setTrend(trend);\n\n  localStorage.setItem('selected-trend', JSON.stringify(trend));\n\n  location.reload();\n}\n","import Pagination from 'tui-pagination';\n\nimport { refs } from './refs';\nimport { serverApi } from './serverApi';\nimport { posterСheck } from './posterCheck';\nimport { options } from '../pagination';\nimport { spinnerPlay, spinnerStop } from '../spinner';\nimport { spinnerPlay, spinnerStop } from '../spinner';\nimport warship from '../../images/warship.jpg';\nimport { makeGenres } from './makeGenres';\nimport { makeDate } from './makeReleaseDate';\n\nconst pagination = new Pagination(refs.tuiContainer, options);\n\nspinnerPlay(); // ! не пересовувати\n\npagination.on('beforeMove', async event => {\n  spinnerPlay();\n  pagination.setTotalItems(serverApi.totalResults);\n\n  if (refs.trend.value === 'top' || refs.trend.value === 'popular') {\n    pagination.setTotalItems(10000);\n    serverApi.setTotalResults(10000);\n  } else {\n    pagination.setTotalItems(serverApi.totalResults);\n  }\n\n  const currentPage = event.page;\n  serverApi.setPage(currentPage);\n  murkupGallery();\n});\n\nexport function murkupGalleryOnPageLoading(movies) {\n  if (!JSON.parse(localStorage.getItem('language'))) {\n    localStorage.setItem('language', JSON.stringify(refs.langValue.value));\n  }\n\n  serverApi.setPage(1);\n\n  if (refs.langValue.value === 'ru') {\n    return (refs.gallery.innerHTML = `<li class=\"warship\"><img src=\"${warship}\" /></li>`);\n  }\n\n  const moviesMurkup = movies\n\n    .map(\n      ({ original_title, title, poster_path, id, genre_ids, release_date }) => {\n        const src = posterСheck(poster_path);\n\n        const genres = makeGenres(genre_ids);\n\n        return `\n        <li class=\"film__item\" data-id=\"${id}\">\n        <img src=\"${src}\" class=\"film__img\" alt=\"${original_title}\" />\n        <div>\n        <p class=\"film__title\">${title}</p>\n        <p class=\"film__genre\">${genres} | ${makeDate(release_date)}</p></div>\n      </li>`;\n      }\n    )\n    .join(``);\n\n  return (refs.gallery.innerHTML = moviesMurkup);\n}\n\nexport async function murkupGallery() {\n  try {\n    let movies = [];\n\n    if (refs.trend.value === 'top') {\n      movies = await serverApi.getTop();\n    } else if (refs.trend.value === 'popular') {\n      movies = await serverApi.getPopular();\n    } else {\n      movies = await serverApi.getPopularMovie();\n    }\n\n    serverApi.setTotalResults(movies.total_results);\n    murkupGalleryOnPageLoading(movies.results);\n  } catch (error) {\n    console.log(error);\n  }\n\n  spinnerStop();\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"bRNsJ\")).toString();","import 'simplelightbox/dist/simple-lightbox.min.css';\nimport Notiflix from 'notiflix';\nimport { refs } from './utilitiesJS/refs';\nimport { serverApi } from './utilitiesJS/serverApi';\nimport { murkupGallery } from './utilitiesJS/murkupGalleryOnPageLoading';\nimport { movieDescriptionMurkup } from './descriptionMurkup';\nimport { closeModal, onOpenModal } from './modal';\nimport { onAddQueueClick, onAddWatchClick } from './addFavorites';\nimport {\n  makeQueueTextContent,\n  makeWatchTextContent,\n} from './utilitiesJS/modalBtnTextContent';\nimport { handleClick } from './treiler';\nimport { spinnerPlay, spinnerStop } from './spinner';\nimport { markupCast } from './utilitiesJS/markupCast';\nimport { markupRewiew } from './utilitiesJS/markupRewiews';\n\nmurkupGallery();\n\nrefs.gallery.addEventListener(`click`, onClickMovie);\n\nasync function onClickMovie(e) {\n  if (e.target.parentElement.className !== 'film__item') {\n    return;\n  }\n\n  onOpenModal();\n\n  spinnerPlay();\n\n  const id = e.target.parentElement.dataset.id;\n\n  const detailsMovie = await serverApi.getDetailsMovie(id);\n\n  const movieMurkup = await movieDescriptionMurkup(detailsMovie);\n\n  refs.movieDescription.insertAdjacentHTML('beforeend', movieMurkup);\n\n  spinnerStop();\n\n  makeWatchTextContent(detailsMovie);\n  makeQueueTextContent(detailsMovie);\n\n  const watchBtn = document.querySelector('[data-add-watched]');\n  const queueBtn = document.querySelector('[data-add-queue]');\n  const closeModalBtn = document.querySelector('[data-modal-close]');\n  const trailerBtn = document.querySelector('.btn-ytb');\n  const iconTrailerBtn = document.querySelector('.icon-youtube');\n  const castBtn = document.querySelector('[data-cast]');\n  const rewiewBtn = document.querySelector('[data-rewiews]');\n\n  serverApi.getTrailer(id).then(({ results }) => {\n    if (results.length !== 0) {\n      iconTrailerBtn.classList.add('icon-youtube__enable');\n      iconTrailerBtn.classList.remove('icon-youtube__disabled');\n    } else {\n      iconTrailerBtn.classList.remove('icon-youtube__enable');\n      iconTrailerBtn.classList.add('icon-youtube__disabled');\n      trailerBtn.setAttribute('disabled', true);\n      Notiflix.Notify.failure('Oh! Unfortunately there is no trailer', {\n        position: 'center-top',\n        fontFamily: 'inherit',\n        borderRadius: '25px',\n        clickToClose: true,\n      });\n    }\n  });\n\n  serverApi.getCasts(id).then(data => {\n    if (data.length === 0) {\n      castBtn.setAttribute('disabled', true);\n    }\n  });\n\n  serverApi.getRewiews(id).then(data => {\n    if (data.length === 0) {\n      rewiewBtn.setAttribute('disabled', true);\n    }\n  });\n\n  watchBtn.addEventListener('click', () => onAddWatchClick(detailsMovie));\n  queueBtn.addEventListener('click', () => onAddQueueClick(detailsMovie));\n  trailerBtn.addEventListener('click', handleClick);\n  castBtn.addEventListener('click', () => markupCast(id));\n  rewiewBtn.addEventListener('click', () => markupRewiew(id));\n\n  closeModalBtn.addEventListener('click', closeModal);\n}\n","import Notiflix from 'notiflix';\nimport Pagination from 'tui-pagination';\n\nimport { refs } from './utilitiesJS/refs';\nimport { serverApi } from './utilitiesJS/serverApi';\nimport { options } from './pagination';\nimport {\n  murkupGalleryOnPageLoading,\n  murkupGallery,\n} from './utilitiesJS/murkupGalleryOnPageLoading';\nimport { spinnerPlay, spinnerStop } from './spinner';\n\nlet searchQuery = ' ';\nrefs.formRef.addEventListener('submit', onSubmitClick);\n\nasync function onSubmitClick(event) {\n  event.preventDefault();\n\n  spinnerPlay();\n\n  const inputRef = document.querySelector('.header__form-input');\n  inputRef.addEventListener('change', () => {\n    serverApi.setPage(1);\n    serverApi.setRequestCount();\n  });\n\n  searchQuery = event.currentTarget.elements.serch_film.value\n    .trim()\n    .toLowerCase();\n\n  if (!searchQuery) {\n    Notiflix.Notify.failure('Enter the name of the movie', {\n      position: 'center-top',\n      fontFamily: 'inherit',\n      borderRadius: '25px',\n      clickToClose: true,\n    });\n    spinnerStop();\n    return;\n  }\n\n  await murkupSearchMovie();\n\n  spinnerStop();\n\n  const pagination = new Pagination(refs.tuiContainer, options);\n\n  pagination.on('beforeMove', event => {\n    const currentPage = event.page;\n    serverApi.setPage(currentPage);\n    serverApi.incrementRequestCount();\n    murkupSearchMovie();\n  });\n\n  event.target.reset();\n}\n\nexport async function murkupSearchMovie() {\n  const data = await serverApi.getMovieOnDemand(searchQuery);\n  const movies = data.results;\n  const total_results = data.total_results;\n  options.totalItems = total_results;\n\n  if (total_results < 20 && total_results !== 0) {\n    refs.tuiContainer.classList.add('visually-hidden');\n  } else {\n    refs.tuiContainer.classList.remove('visually-hidden');\n  }\n\n  if (movies.length === 0) {\n    murkupGallery();\n    Notiflix.Notify.failure(\n      'Search result not successful. Enter the correct movie name and',\n      {\n        position: 'center-top',\n        fontFamily: 'inherit',\n        borderRadius: '25px',\n        clickToClose: true,\n      }\n    );\n    window.history.go();\n    return;\n  }\n\n  murkupGalleryOnPageLoading(movies);\n}\n"],"names":["parcelRequire","register","JSON","parse","$185lj","refs","langValue","addEventListener","evt","language","target","value","serverApi","setlang","localStorage","setItem","stringify","location","reload","getItem","parsedData","$3fz09","trend","setTrend","$fb9GJ","$961ac6ba8a9b0f3e$exports","URL","resolve","import","meta","url","toString","$47cbafa11ce31a61$var$pagination","$parcel$interopDefault","tuiContainer","$2nhTy","options","$47cbafa11ce31a61$export$ce0b9808aa57ae7d","movies","setPage","gallery","innerHTML","moviesMurkup","map","original_title","title","poster_path","id","genre_ids","release_date","$1fedI","$9zntY","makeGenres","$3gXpH","makeDate","join","async","$47cbafa11ce31a61$export$6bb355015a1580b","getTop","getPopular","getPopularMovie","setTotalResults","total_results","results","error","console","log","$04jNI","spinnerStop","spinnerPlay","on","event","setTotalItems","totalResults","currentPage","page","e","parentElement","className","$bTcpz","onOpenModal","dataset","detailsMovie","getDetailsMovie","movieMurkup","$it60l","movieDescriptionMurkup","movieDescription","insertAdjacentHTML","$lFT8c","makeWatchTextContent","makeQueueTextContent","watchBtn","document","querySelector","queueBtn","closeModalBtn","trailerBtn","iconTrailerBtn","castBtn","rewiewBtn","getTrailer","then","length","classList","add","remove","setAttribute","$eWCmQ","Notify","failure","position","fontFamily","borderRadius","clickToClose","getCasts","data","getRewiews","$9Co7P","onAddWatchClick","onAddQueueClick","$c8VpK","handleClick","$6yrCC","markupCast","$hswrV","markupRewiew","closeModal","$307187451cbc0239$var$searchQuery","$307187451cbc0239$export$80a6146058001a40","getMovieOnDemand","totalItems","window","history","go","formRef","event1","preventDefault","setRequestCount","currentTarget","elements","serch_film","trim","toLowerCase","incrementRequestCount","reset"],"version":3,"file":"index.a10108b5.js.map"}