function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},i={},s=t.parcelRequire62bd;null==s&&((s=function(e){if(e in n)return n[e].exports;if(e in i){var t=i[e];delete i[e];var s={id:e,exports:{}};return n[e]=s,t.call(s.exports,s,s.exports),s.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){i[e]=t},t.parcelRequire62bd=s),s("bTcpz"),s("7bYU0");var r=s("fb9GJ"),l=s("3fz09"),a=s("1fedI"),o=s("bTcpz"),c=s("it60l"),d=s("185lj"),u=(c=s("it60l"),s("bTcpz"),s("9Co7P")),f=(o=s("bTcpz"),s("2nhTy")),p=s("bRnc2"),m=s("lFT8c");function g(e){const t=e.map((({original_title:e,title:t,poster_path:n,id:i,genres:s,release_date:r})=>{let l=null,o=null;const c=s.map((e=>e.id)),d=(0,a.posterСheck)(n),u=p.genresArr.reduce(((e,t)=>(c.includes(t.id)&&e.push(t.name),e)),[]);return u.length>3?(l=u.slice(0,2),l.splice(2,1,"Other")):l=0===u.length?["Genres not found"]:u,o=""===r?"Release data no found":r.slice(0,4),`\n        <li class="film__item" data-id="${i}">\n        <img src="${d}" class="film__img" alt="${e}" />\n        <p class="film__title">${t}</p>\n        <p class="film__genre">${l.join(", ")} | ${o}</p>\n      </li>`})).join("");return l.refs.galleryLibrary.innerHTML=t}l.refs.btnWathed.addEventListener("click",(function t(){try{const n=JSON.parse(localStorage.getItem("watch"));f.options.totalItems=n.length;let i=0,s=20;if(!n.length){l.refs.mainList.classList.add("not-films"),l.refs.containerLib.insertAdjacentHTML("beforeend",createMessage()),l.refs.btnWathed.removeEventListener("click",t);return void document.querySelector(".tui-js").classList.add("visually-hidden")}document.querySelector(".tui-js").classList.remove("visually-hidden");g(n.slice(i,s));const a=document.querySelector(".tui-pagination");new(e(r))(a,f.options).on("beforeMove",(e=>{const t=e.page;i=t*f.options.itemsPerPage-20,s=t*f.options.itemsPerPage,d.serverApi.setPage(t),d.serverApi.incrementRequestCount(),g(n.slice(i,s))}))}catch(e){console.log(e.message)}})),l.refs.galleryLibrary.addEventListener("click",(async function(e){if("film__item"!==e.target.parentElement.className)return;(0,o.onOpenModal)();const t=e.target.parentElement.dataset.id,n=await d.serverApi.getDetailsMovie(t),i=await(0,c.movieDescriptionMurkup)(n);l.refs.movieDescription.insertAdjacentHTML("beforeend",i),(0,m.makeWatchTextContent)(n),(0,m.makeQueueTextContent)(n);const s=document.querySelector("[data-add-watched]"),r=document.querySelector("[data-add-queue]"),a=document.querySelector("[data-modal-close]");s.addEventListener("click",(()=>{(0,u.onAddWatchClick)(n);g(JSON.parse(localStorage.getItem("watch")))})),r.addEventListener("click",(()=>{(0,u.onAddQueueClick)(n);g(JSON.parse(localStorage.getItem("queue")))})),a.addEventListener("click",o.closeModal)}));r=s("fb9GJ"),l=s("3fz09"),a=s("1fedI"),l=s("3fz09");p=s("bRnc2"),f=s("2nhTy");function h(e){const t=e.map((({original_title:e,title:t,poster_path:n,id:i,genres:s,release_date:r})=>{let l=null,o=null;const c=s.map((e=>e.id)),d=(0,a.posterСheck)(n),u=p.genresArr.reduce(((e,t)=>(c.includes(t.id)&&e.push(t.name),e)),[]);return u.length>3?(l=u.slice(0,2),l.splice(2,1,"Other")):l=0===u.length?["Genres not found"]:u,o=""===r?"Release data no found":r.slice(0,4),`\n        <li class="film__item" data-id="${i}">\n        <img src="${d}" class="film__img" alt="${e}" />\n        <p class="film__title">${t}</p>\n        <p class="film__genre">${l.join(", ")} | ${o}</p>\n      </li>`})).join("");return l.refs.galleryLibrary.innerHTML=t}l.refs.btnQueue.addEventListener("click",(function t(){h(JSON.parse(localStorage.getItem("queue")));try{const n=JSON.parse(localStorage.getItem("queue"));f.options.totalItems=n.length;let i=0,s=20;if(!n.length){l.refs.mainList.classList.add("not-films"),l.refs.containerLib.insertAdjacentHTML("beforeend",createMessage()),l.refs.btnQueue.removeEventListener("click",t);return void document.querySelector(".tui-js").classList.add("visually-hidden")}document.querySelector(".tui-js").classList.remove("visually-hidden");h(n.slice(i,s));const a=document.querySelector(".tui-pagination");new(e(r))(a,f.options).on("beforeMove",(e=>{const t=e.page;i=t*f.options.itemsPerPage-20,s=t*f.options.itemsPerPage,serverApi.setPage(t),serverApi.incrementRequestCount(),h(n.slice(i,s))}))}catch(e){console.log(e.message)}})),s("2nhTy"),s("eobyt"),s("3TU0j"),s("3hXKf");
//# sourceMappingURL=mylibrary.0bda1460.js.map
