{"mappings":"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","sources":["src/mylibrary.js","src/js/watchedMovies.js","src/js/queueMovies.js","src/js/utilitiesJS/clearPage.js"],"sourcesContent":["import './js/modal';\nimport './js/modal-team';\nimport './js/watchedMovies';\nimport './js/queueMovies';\nimport './js/pagination';\nimport './js/theme-dark';\nimport './js/scrollTop';\n\nimport './js/modal-login';\n\n","import Pagination from 'tui-pagination';\n\nimport { refs } from './utilitiesJS/refs';\nimport { posterСheck } from './utilitiesJS/posterCheck';\nimport { onOpenModal } from './modal';\nimport { movieDescriptionMurkup } from './descriptionMurkup';\nimport { serverApi } from './utilitiesJS/serverApi';\nimport { movieDescriptionMurkup } from './descriptionMurkup';\nimport { onOpenModal } from './modal';\nimport { onAddQueueClick, onAddWatchClick } from './addFavorites';\nimport { closeModal, onOpenModal } from './modal';\nimport { options } from './pagination';\nimport { genresArr } from './utilitiesJS/genres';\nimport {\n  makeQueueTextContent,\n  makeWatchTextContent,\n} from './utilitiesJS/modalBtnTextContent';\n\nrefs.btnWathed.addEventListener('click', onBtnWatchedClick);\n\nfunction onBtnWatchedClick() {\n  try {\n    const watched = JSON.parse(localStorage.getItem('watch'));\n    options.totalItems = watched.length;\n    let start = 0;\n    let end = 20;\n\n    if (!watched.length) {\n      refs.mainList.classList.add('not-films');\n      refs.containerLib.insertAdjacentHTML('beforeend', createMessage());\n      refs.btnWathed.removeEventListener('click', onBtnWatchedClick);\n      const item = document.querySelector('.tui-js');\n      item.classList.add('visually-hidden');\n      return;\n    } else {\n      const item = document.querySelector('.tui-js');\n      item.classList.remove('visually-hidden');\n    }\n\n    murkupGalleryOnBtnWatched(watched.slice(start, end));\n\n    const container = document.querySelector('.tui-pagination');\n\n    const pagination = new Pagination(container, options);\n\n    pagination.on('beforeMove', event => {\n      const currentPage = event.page;\n      start = currentPage * options.itemsPerPage - 20;\n      end = currentPage * options.itemsPerPage;\n      serverApi.setPage(currentPage);\n      serverApi.incrementRequestCount();\n      murkupGalleryOnBtnWatched(watched.slice(start, end));\n    });\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\nfunction murkupGalleryOnBtnWatched(movies) {\n  const moviesMurkup = movies\n    .map(({ original_title, title, poster_path, id, genres, release_date }) => {\n      let genresMovie = null;\n      let releaseDate = null;\n\n      const genresId = genres.map(genre => genre.id);\n      const src = posterСheck(poster_path);\n\n      const genresMovies = genresArr.reduce((acc, genre) => {\n        if (genresId.includes(genre.id)) {\n          acc.push(genre.name);\n        }\n        return acc;\n      }, []);\n\n      if (genresMovies.length > 3) {\n        genresMovie = genresMovies.slice(0, 2);\n        genresMovie.splice(2, 1, 'Other');\n      } else if (genresMovies.length === 0) {\n        genresMovie = [`Genres not found`];\n      } else {\n        genresMovie = genresMovies;\n      }\n\n      if (release_date === '') {\n        releaseDate = 'Release data no found';\n      } else {\n        releaseDate = release_date.slice(0, 4);\n      }\n\n      return `\n        <li class=\"film__item\" data-id=\"${id}\">\n        <img src=\"${src}\" class=\"film__img\" alt=\"${original_title}\" />\n        <p class=\"film__title\">${title}</p>\n        <p class=\"film__genre\">${genresMovie.join(`, `)} | ${releaseDate}</p>\n      </li>`;\n    })\n    .join(``);\n\n  return (refs.galleryLibrary.innerHTML = moviesMurkup);\n}\n\nrefs.galleryLibrary.addEventListener(`click`, onClickMovie);\n\nasync function onClickMovie(e) {\n  if (e.target.parentElement.className !== 'film__item') {\n    return;\n  }\n\n  onOpenModal();\n  const id = e.target.parentElement.dataset.id;\n\n  const detailsMovie = await serverApi.getDetailsMovie(id);\n\n  const movieMurkup = await movieDescriptionMurkup(detailsMovie);\n\n  refs.movieDescription.insertAdjacentHTML('beforeend', movieMurkup);\n  makeWatchTextContent(detailsMovie);\n  makeQueueTextContent(detailsMovie);\n\n  const watchBtn = document.querySelector('[data-add-watched]');\n  const queueBtn = document.querySelector('[data-add-queue]');\n  const closeModalBtn = document.querySelector('[data-modal-close]');\n\n  watchBtn.addEventListener('click', () => {\n    onAddWatchClick(detailsMovie);\n    const watched = JSON.parse(localStorage.getItem('watch'));\n    murkupGalleryOnBtnWatched(watched);\n  });\n  queueBtn.addEventListener('click', () => {\n    onAddQueueClick(detailsMovie);\n    const queued = JSON.parse(localStorage.getItem('queue'));\n    murkupGalleryOnBtnWatched(queued);\n  });\n  closeModalBtn.addEventListener('click', closeModal);\n}\n","import Pagination from 'tui-pagination';\n\nimport { refs } from './utilitiesJS/refs';\nimport { posterСheck } from './utilitiesJS/posterCheck';\nimport { clearPage } from './utilitiesJS/clearPage';\nimport { genresArr } from './utilitiesJS/genres';\nimport { options } from './pagination';\n\n\nrefs.btnQueue.addEventListener('click', onBtnQueueClick);\n\nfunction onBtnQueueClick() {\n  // clearPage();\n\n  const queue = JSON.parse(localStorage.getItem('queue'));\n  murkupGalleryOnBtnQueued(queue);\n\n  try {\n    const queue = JSON.parse(localStorage.getItem('queue'));\n    options.totalItems = queue.length;\n    let start = 0;\n    let end = 20;\n\n    if (!queue.length) {\n      refs.mainList.classList.add('not-films');\n      refs.containerLib.insertAdjacentHTML('beforeend', createMessage());\n      refs.btnQueue.removeEventListener('click', onBtnQueueClick);\n      const item = document.querySelector('.tui-js');\n      item.classList.add('visually-hidden');\n      return;\n    } else {\n      const item = document.querySelector('.tui-js');\n      item.classList.remove('visually-hidden');\n    }\n\n    murkupGalleryOnBtnQueued(queue.slice(start, end));\n\n    const container = document.querySelector('.tui-pagination');\n\n    const pagination = new Pagination(container, options);\n\n    pagination.on('beforeMove', event => {\n      const currentPage = event.page;\n      start = currentPage * options.itemsPerPage - 20;\n      end = currentPage * options.itemsPerPage;\n      serverApi.setPage(currentPage);\n      serverApi.incrementRequestCount();\n      murkupGalleryOnBtnQueued(queue.slice(start, end));\n    });\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\nfunction murkupGalleryOnBtnQueued(movies) {\n  const moviesMurkup = movies\n    .map(({ original_title, title, poster_path, id, genres, release_date }) => {\n      let genresMovie = null;\n      let releaseDate = null;\n\n      const genresId = genres.map(genre => genre.id);\n      const src = posterСheck(poster_path);\n\n      const genresMovies = genresArr.reduce((acc, genre) => {\n        if (genresId.includes(genre.id)) {\n          acc.push(genre.name);\n        }\n        return acc;\n      }, []);\n\n      if (genresMovies.length > 3) {\n        genresMovie = genresMovies.slice(0, 2);\n        genresMovie.splice(2, 1, 'Other');\n      } else if (genresMovies.length === 0) {\n        genresMovie = [`Genres not found`];\n      } else {\n        genresMovie = genresMovies;\n      }\n\n      if (release_date === '') {\n        releaseDate = 'Release data no found';\n      } else {\n        releaseDate = release_date.slice(0, 4);\n      }\n\n      return `\n        <li class=\"film__item\" data-id=\"${id}\">\n        <img src=\"${src}\" class=\"film__img\" alt=\"${original_title}\" />\n        <p class=\"film__title\">${title}</p>\n        <p class=\"film__genre\">${genresMovie.join(`, `)} | ${releaseDate}</p>\n      </li>`;\n    })\n    .join(``);\n\n  return (refs.galleryLibrary.innerHTML = moviesMurkup);\n}\n","import { refs } from './refs';\n\nexport function clearPage() {\n  refs.gallery.innerHTML = '';\n}\n"],"names":["parcelRequire","$fb9GJ","$c5c7efe92cb3f8dd$var$murkupGalleryOnBtnWatched","movies","moviesMurkup","map","original_title","title","poster_path","id","genres","release_date","genresMovie","releaseDate","genresId","genre","src","$1fedI","genresMovies","$bRnc2","genresArr","reduce","acc","includes","push","name","length","slice","splice","join","$3fz09","refs","galleryLibrary","innerHTML","btnWathed","addEventListener","$c5c7efe92cb3f8dd$var$onBtnWatchedClick","watched","JSON","parse","localStorage","getItem","$2nhTy","options","totalItems","start","end","mainList","classList","add","containerLib","insertAdjacentHTML","createMessage","removeEventListener","document","querySelector","remove","container","$parcel$interopDefault","on","event","currentPage","page","itemsPerPage","$185lj","serverApi","setPage","incrementRequestCount","error","console","log","message","async","e","target","parentElement","className","$bTcpz","onOpenModal","dataset","detailsMovie","getDetailsMovie","movieMurkup","$it60l","movieDescriptionMurkup","movieDescription","$lFT8c","makeWatchTextContent","makeQueueTextContent","watchBtn","queueBtn","closeModalBtn","$9Co7P","onAddWatchClick","onAddQueueClick","closeModal","$9635c521914b1c37$var$murkupGalleryOnBtnQueued","btnQueue","$9635c521914b1c37$var$onBtnQueueClick","queue"],"version":3,"file":"mylibrary.0bda1460.js.map"}