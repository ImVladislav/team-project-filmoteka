function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},s={},i=t.parcelRequire62bd;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in s){var t=s[e];delete s[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){s[e]=t},t.parcelRequire62bd=i),i("bTcpz"),i("7bYU0");var r=i("fb9GJ"),a=i("3fz09"),o=i("1fedI"),l=i("it60l"),c=i("185lj"),d=i("9Co7P"),u=i("bTcpz"),p=i("2nhTy"),m=i("bRnc2"),f=i("lFT8c");function g(e){const t=e.map((({original_title:e,title:t,poster_path:n,id:s,genres:i,release_date:r})=>{let a=null,l=null;const c=i.map((e=>e.id)),d=(0,o.posterСheck)(n),u=m.genresArr.reduce(((e,t)=>(c.includes(t.id)&&e.push(t.name),e)),[]);return u.length>3?(a=u.slice(0,2),a.splice(2,1,"Other")):a=0===u.length?["Genres not found"]:u,l=""===r?"Release data no found":r.slice(0,4),`\n        <li class="film__item" data-id="${s}">\n        <img src="${d}" class="film__img" alt="${e}" />\n        <p class="film__title">${t}</p>\n        <p class="film__genre">${a.join(", ")} | ${l}</p>\n      </li>`})).join("");return a.refs.galleryLibrary.innerHTML=t}a.refs.btnWathed.addEventListener("click",(function t(){try{const n=JSON.parse(localStorage.getItem("watch"));p.options.totalItems=n.length;let s=0,i=20;if(!n.length){a.refs.containerLib.insertAdjacentHTML("beforeend",'<div class="message-wrap">\n      <p class="sorry">Sorry...</p>\n      <p class="message">\n        You haven\'t added any movies yet. Hope you fix this soon :)\n      </p>\n      <a href="/src/index.html" class="library__button accent">Filmoteka</a>\n    </div>'),a.refs.btnWathed.removeEventListener("click",t);return void document.querySelector(".tui-js").classList.add("visually-hidden")}document.querySelector(".tui-js").classList.remove("visually-hidden");g(n.slice(s,i));const o=document.querySelector(".tui-pagination");new(e(r))(o,p.options).on("beforeMove",(e=>{const t=e.page;s=t*p.options.itemsPerPage-20,i=t*p.options.itemsPerPage,c.serverApi.setPage(t),c.serverApi.incrementRequestCount(),g(n.slice(s,i))}))}catch(e){console.log(e.message)}})),a.refs.galleryLibrary.addEventListener("click",(async function(e){if("film__item"!==e.target.parentElement.className)return;(0,u.onOpenModal)();const t=e.target.parentElement.dataset.id,n=await c.serverApi.getDetailsMovie(t),s=await(0,l.movieDescriptionMurkup)(n);a.refs.movieDescription.insertAdjacentHTML("beforeend",s),(0,f.makeWatchTextContent)(n),(0,f.makeQueueTextContent)(n);const i=document.querySelector("[data-add-watched]"),r=document.querySelector("[data-add-queue]"),o=document.querySelector("[data-modal-close]");i.addEventListener("click",(()=>{(0,d.onAddWatchClick)(n);g(JSON.parse(localStorage.getItem("watch")))})),r.addEventListener("click",(()=>{(0,d.onAddQueueClick)(n);g(JSON.parse(localStorage.getItem("queue")))})),o.addEventListener("click",u.closeModal)}));r=i("fb9GJ"),a=i("3fz09"),o=i("1fedI"),c=i("185lj"),p=i("2nhTy"),m=i("bRnc2");function h(e){const t=e.map((({original_title:e,title:t,poster_path:n,id:s,genres:i,release_date:r})=>{let a=null,l=null;const c=i.map((e=>e.id)),d=(0,o.posterСheck)(n),u=m.genresArr.reduce(((e,t)=>(c.includes(t.id)&&e.push(t.name),e)),[]);return u.length>3?(a=u.slice(0,2),a.splice(2,1,"Other")):a=0===u.length?["Genres not found"]:u,l=""===r?"Release data no found":r.slice(0,4),`\n        <li class="film__item" data-id="${s}">\n        <img src="${d}" class="film__img" alt="${e}" />\n        <p class="film__title">${t}</p>\n        <p class="film__genre">${a.join(", ")} | ${l}</p>\n      </li>`})).join("");return a.refs.galleryLibrary.innerHTML=t}a.refs.btnQueue.addEventListener("click",(function t(){try{const n=JSON.parse(localStorage.getItem("queue"));p.options.totalItems=n.length;let s=0,i=20;if(!n.length){a.refs.containerLib.insertAdjacentHTML("beforeend",'<div class="message-wrap">\n      <p class="sorry">Sorry...</p>\n      <p class="message">\n        You haven\'t added any movies yet. Hope you fix this soon :)\n      </p>\n      <a href="/src/index.html" class="library__button accent">Filmoteka</a>\n    </div>'),a.refs.btnQueue.removeEventListener("click",t);return void document.querySelector(".tui-js").classList.add("visually-hidden")}document.querySelector(".tui-js").classList.remove("visually-hidden");h(n.slice(s,i));const o=document.querySelector(".tui-pagination");new(e(r))(o,p.options).on("beforeMove",(e=>{const t=e.page;s=t*p.options.itemsPerPage-20,i=t*p.options.itemsPerPage,c.serverApi.setPage(t),c.serverApi.incrementRequestCount(),h(n.slice(s,i))}))}catch(e){console.log(e.message)}})),i("2nhTy"),i("eobyt"),i("3TU0j"),i("3hXKf");
//# sourceMappingURL=mylibrary.20c4d054.js.map
