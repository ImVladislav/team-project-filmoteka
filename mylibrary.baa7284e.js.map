{"mappings":"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","sources":["src/js/onLibraryClick.js","src/js/watchedMovies.js","src/js/utilitiesJS/markupGllery.js","src/js/utilitiesJS/createEmptyLibMessage.js","src/js/queueMovies.js"],"sourcesContent":["import { refs } from './utilitiesJS/refs';\nimport { createMessage } from './utilitiesJS/createEmptyLibMessage';\nimport { onBtnWatchedClick } from './watchedMovies';\nimport { onBtnQueueClick } from './queueMovies';\nimport { serverApi } from './utilitiesJS/serverApi';\n\nonMyLibraryClick();\n\nfunction onMyLibraryClick() {\n  serverApi.setlang(JSON.parse(localStorage.getItem('language')));\n  \n    if (!localStorage.getItem('watch')) {\n    localStorage.setItem('watch', JSON.stringify([]));\n  }\n\n  if (!localStorage.getItem('queue')) {\n    localStorage.setItem('queue', JSON.stringify([]));\n  }\n\n  try {\n    const watch = JSON.parse(localStorage.getItem('watch'));\n    const queue = JSON.parse(localStorage.getItem('queue'));\n\n    if (watch && watch.length !== 0) {\n      onBtnWatchedClick();\n      return;\n    } else if ((queue && queue.length !== 0 && !watch) || watch.length === 0) {\n      onBtnQueueClick();\n      return;\n    } else {\n      refs.galleryLibrary.insertAdjacentHTML('beforeend', createMessage());\n      return;\n    }\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n","import Pagination from 'tui-pagination';\nimport Notiflix from 'notiflix';\nimport { refs } from './utilitiesJS/refs';\nimport { movieDescriptionMurkup } from './descriptionMurkup';\nimport { serverApi } from './utilitiesJS/serverApi';\nimport { onAddQueueClick, onAddWatchClick } from './addFavorites';\nimport { closeModal, onOpenModal } from './modal';\nimport { options } from './pagination';\nimport {\n  makeQueueTextContent,\n  makeWatchTextContent,\n} from './utilitiesJS/modalBtnTextContent';\nimport { handleClick } from './treiler';\nimport { createMessage } from './utilitiesJS/createEmptyLibMessage';\nimport { murkupGallery } from './utilitiesJS/markupGllery';\nimport { markupCast } from './utilitiesJS/markupCast';\nimport { markupRewiew } from './utilitiesJS/markupRewiews';\n\nrefs.btnWathed.addEventListener('click', onBtnWatchedClick);\n\nexport function onBtnWatchedClick() {\n  refs.btnWathed.dataset.watch = 'active';\n  refs.btnQueue.dataset.queue = '';\n\n  try {\n    const watched = JSON.parse(localStorage.getItem('watch'));\n\n    if (!watched || watched.length === 0) {\n      refs.galleryLibrary.innerHTML = createMessage();\n      refs.tuiContainer.classList.add('visually-hidden');\n      return;\n    } else {\n      options.totalItems = watched.length;\n      let start = 0;\n      let end = 20;\n\n      const handleSlice = currentPage => {\n        start = currentPage * options.itemsPerPage - 20;\n        end = currentPage * options.itemsPerPage;\n      };\n\n      refs.tuiContainer.classList.remove('visually-hidden');\n      murkupGallery(watched.slice(start, end));\n      const pagination = new Pagination(refs.tuiContainer, options);\n\n      pagination.on('beforeMove', event => {\n        const currentPage = event.page;\n        handleSlice(currentPage);\n        murkupGallery(watched.slice(start, end));\n      });\n    }\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\nrefs.galleryLibrary.addEventListener(`click`, onClickMovie);\n\nasync function onClickMovie(e) {\n  if (e.target.parentElement.className !== 'film__item') {\n    return;\n  }\n\n  onOpenModal();\n\n  const id = e.target.parentElement.dataset.id;\n\n  const detailsMovie = await serverApi.getDetailsMovie(id);\n\n  const movieMurkup = await movieDescriptionMurkup(detailsMovie);\n\n  refs.movieDescription.insertAdjacentHTML('beforeend', movieMurkup);\n\n  makeWatchTextContent(detailsMovie);\n  makeQueueTextContent(detailsMovie);\n\n  const watchBtn = document.querySelector('[data-add-watched]');\n  const queueBtn = document.querySelector('[data-add-queue]');\n  const closeModalBtn = document.querySelector('[data-modal-close]');\n  const trailerBtn = document.querySelector('.btn-ytb');\n  const iconTrailerBtn = document.querySelector('.icon-youtube');\n  const castBtn = document.querySelector('[data-cast]');\n  const rewiewBtn = document.querySelector('[data-rewiews]');\n\n  watchBtn.addEventListener('click', () => {\n    onAddWatchClick(detailsMovie);\n    const watched = JSON.parse(localStorage.getItem('watch'));\n\n    if (refs.btnWathed.dataset.watch === 'active') {\n      murkupGallery(watched);\n    }\n  });\n\n  queueBtn.addEventListener('click', () => {\n    onAddQueueClick(detailsMovie);\n    const queued = JSON.parse(localStorage.getItem('queue'));\n\n    if (refs.btnQueue.dataset.queue === 'active') {\n      murkupGallery(queued);\n    }\n  });\n\n  serverApi.getTrailer(id).then(({ results }) => {\n    if (results.length !== 0) {\n      iconTrailerBtn.classList.add('icon-youtube__enable');\n      iconTrailerBtn.classList.remove('icon-youtube__disabled');\n    } else {\n      iconTrailerBtn.classList.remove('icon-youtube__enable');\n      iconTrailerBtn.classList.add('icon-youtube__disabled');\n      trailerBtn.setAttribute('disabled', true);\n      Notiflix.Notify.failure('Oh! Unfortunately there is no trailer', {\n        position: 'center-top',\n        fontFamily: 'inherit',\n        borderRadius: '25px',\n        clickToClose: true,\n      });\n    }\n  });\n\n  serverApi.getCasts(id).then(data => {\n    if (data.length === 0) {\n      castBtn.setAttribute('disabled', true);\n    }\n  });\n  serverApi.getRewiews(id).then(data => {\n    if (data.length === 0) {\n      rewiewBtn.setAttribute('disabled', true);\n    }\n  });\n\n  trailerBtn.addEventListener('click', handleClick);\n  castBtn.addEventListener('click', () => markupCast(id));\n  rewiewBtn.addEventListener('click', () => markupRewiew(id));\n\n  closeModalBtn.addEventListener('click', closeModal);\n}\n","import { refs } from './refs';\nimport { posterСheck } from './posterCheck';\nimport { genresArr, genresUK } from './genres';\nimport { createMessage } from './createEmptyLibMessage';\nimport { makeGenres } from './makeGenres';\nimport { makeDate } from './makeReleaseDate';\n\nexport function murkupGallery(movies) {\n  if (!movies.length) {\n    refs.tuiContainer.classList.add('visually-hidden');\n    return (refs.galleryLibrary.innerHTML = createMessage());\n  }\n\n  const moviesMurkup = movies\n    .map(({ original_title, title, poster_path, id, genres, release_date }) => {\n      const genresId = genres.map(genre => genre.id);\n      const src = posterСheck(poster_path);\n\n      return `\n          <li class=\"film__item\" data-id=\"${id}\">\n          <img src=\"${src}\" class=\"film__img\" alt=\"${original_title}\" />\n          <p class=\"film__title\">${title}</p>\n          <p class=\"film__genre\">${makeGenres(genresId)} | ${makeDate(\n        release_date\n      )}</p>\n        </li>`;\n    })\n    .join(``);\n\n  return (refs.galleryLibrary.innerHTML = moviesMurkup);\n}\n","export function createMessage() {\n  const messageMarkup = `<div class=\"message-wrap\" >\n      <p class=\"sorry\">Sorry...</p>\n      <p class=\"message\">\n        You haven't added any movies yet. Hope you fix this soon :)\n      </p>\n      <a href=\"./index.html\" class=\"library__button accent\">Filmoteka</a>\n    </div>`;\n  return messageMarkup;\n}\n","import Pagination from 'tui-pagination';\n\nimport { refs } from './utilitiesJS/refs';\nimport { options } from './pagination';\nimport { createMessage } from './utilitiesJS/createEmptyLibMessage';\nimport { murkupGallery } from './utilitiesJS/markupGllery';\n\nrefs.btnQueue.addEventListener('click', onBtnQueueClick);\n\nexport function onBtnQueueClick() {\n  refs.btnWathed.dataset.watch = '';\n  refs.btnQueue.dataset.queue = 'active';\n\n  try {\n    const queue = JSON.parse(localStorage.getItem('queue'));\n\n    if (!queue || queue.length === 0) {\n      refs.galleryLibrary.innerHTML = createMessage();\n      refs.tuiContainer.classList.add('visually-hidden');\n      return;\n    } else {\n      options.totalItems = queue.length;\n      let start = 0;\n      let end = 20;\n\n      const handleSlice = currentPage => {\n        start = currentPage * options.itemsPerPage - 20;\n        end = currentPage * options.itemsPerPage;\n      };\n\n      refs.tuiContainer.classList.remove('visually-hidden');\n      murkupGallery(queue.slice(start, end));\n\n      const pagination = new Pagination(refs.tuiContainer, options);\n\n      pagination.on('beforeMove', event => {\n        const currentPage = event.page;\n        handleSlice(currentPage);\n        murkupGallery(queue.slice(start, end));\n      });\n    }\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n"],"names":["$3fz09","parcelRequire","$fb9GJ","$c8e0ca3050cd137a$export$6bb355015a1580b","movies","length","refs","tuiContainer","classList","add","galleryLibrary","innerHTML","moviesMurkup","map","original_title","title","poster_path","id","genres","release_date","genresId","genre","$1fedI","$9zntY","makeGenres","$3gXpH","makeDate","join","$c5c7efe92cb3f8dd$export$e3cd2a9e9061f2c1","btnWathed","dataset","watch","btnQueue","queue","watched","JSON","parse","localStorage","getItem","$2nhTy","options","totalItems","start","end","handleSlice","currentPage","itemsPerPage","remove","slice","$parcel$interopDefault","on","event","page","error","console","log","message","addEventListener","async","e","target","parentElement","className","$bTcpz","onOpenModal","detailsMovie","$185lj","serverApi","getDetailsMovie","movieMurkup","$it60l","movieDescriptionMurkup","movieDescription","insertAdjacentHTML","$lFT8c","makeWatchTextContent","makeQueueTextContent","watchBtn","document","querySelector","queueBtn","closeModalBtn","trailerBtn","iconTrailerBtn","castBtn","rewiewBtn","$9Co7P","onAddWatchClick","onAddQueueClick","queued","getTrailer","then","results","setAttribute","$eWCmQ","Notify","failure","position","fontFamily","borderRadius","clickToClose","getCasts","data","getRewiews","$c8VpK","handleClick","$6yrCC","markupCast","$hswrV","markupRewiew","closeModal","$9635c521914b1c37$export$b055216bf7aaa057","setlang","setItem","stringify","$329f78f0a101c0d2$var$onMyLibraryClick"],"version":3,"file":"mylibrary.baa7284e.js.map"}