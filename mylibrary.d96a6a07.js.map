{"mappings":"iiBAAAA,EAAA,S,WCAA,IAAAC,EAAAD,EAAA,S,+IAuDA,SAASE,EAA0BC,GACjC,IAAMC,EAAeD,EAClBE,KAAI,SAAAC,G,IAAGC,EAAcD,EAAdC,eAAgBC,EAAKF,EAALE,MAAOC,EAAWH,EAAXG,YAAaC,EAAEJ,EAAFI,GAAIC,EAAML,EAANK,OAAQC,EAAYN,EAAZM,aAClDC,EAAc,KACdC,EAAc,KAEZC,EAAWJ,EAAON,KAAI,SAAAW,G,OAASA,EAAMN,E,IACrCO,GAAM,EAAAC,EAAA,aAAYT,GAElBU,EAAeC,EAAAC,UAAUC,QAAO,SAACC,EAAKP,GAI1C,OAHID,EAASS,SAASR,EAAMN,KAC1Ba,EAAIE,KAAKT,EAAMU,MAEVH,C,GACN,IAiBH,OAfIJ,EAAaQ,OAAS,GACxBd,EAAcM,EAAaS,MAAM,EAAG,IACxBC,OAAO,EAAG,EAAG,SAEzBhB,EADiC,IAAxBM,EAAaQ,OACR,CAAE,oBAEFR,EAIdL,EADmB,KAAjBF,EACY,wBAEAA,EAAagB,MAAM,EAAG,GAG/B,6CAEOE,OADsBpB,EAAG,0BACMoB,OAA/Bb,EAAI,6BACSa,OADkBvB,EAAe,yCAEjCuB,OADAtB,EAAM,yCACsBsB,OAA5BjB,EAAYkB,KAAM,MAAK,OAAiBD,OAAZhB,EAAY,oB,IAGpEiB,KAAM,IAET,OAAQC,EAAAC,KAAKC,eAAeC,UAAY/B,C,UAK3BgC,I,OAAAA,EAAfC,EAAApC,EAAA,CAAAoC,EAAAC,GAAAC,MAAA,SAAAC,EAA4BC,G,IAMpB/B,EAEAgC,EAEAC,EAMAC,EACAC,EACAC,E,qEAjBmC,eAArCL,EAAEM,OAAOC,cAAcC,UAA0B,C,uDAIrD,EAAAC,EAAAC,eACMzC,EAAK+B,EAAEM,OAAOC,cAAcI,QAAQ1C,G,SAEf2C,EAAAC,UAAUC,gBAAgB7C,G,cAA/CgC,EAAYc,EAAAC,K,UAEQ,EAAAC,EAAAC,wBAAuBjB,G,OAA3CC,EAAWa,EAAAC,KAEjBzB,EAAAC,KAAK2B,iBAAiBC,mBAAmB,YAAalB,IACtD,EAAAmB,EAAAC,sBAAqBrB,IACrB,EAAAoB,EAAAE,sBAAqBtB,GAEfE,EAAWqB,SAASC,cAAc,sBAClCrB,EAAWoB,SAASC,cAAc,oBAClCpB,EAAgBmB,SAASC,cAAc,sBAE7CtB,EAASuB,iBAAiB,SAAS,YACjC,EAAAC,EAAAC,iBAAgB3B,GAEhBxC,EADgBoE,KAAKC,MAAMC,aAAaC,QAAQ,U,IAGlD5B,EAASsB,iBAAiB,SAAS,YACjC,EAAAC,EAAAM,iBAAgBhC,GAEhBxC,EADeoE,KAAKC,MAAMC,aAAaC,QAAQ,U,IAGjD3B,EAAcqB,iBAAiB,QAASjB,EAAAyB,Y,6CA9BfC,MAAAC,KAAAC,U,CApF3B9C,EAAAC,KAAK8C,UAAUZ,iBAAiB,SAEhC,SAASa,IACP,IACE,IAAMC,EAAUX,KAAKC,MAAMC,aAAaC,QAAQ,UAEhDS,EAAAC,QAAQC,WAAaH,EAAQtD,OAC7B,IAAI0D,EAAQ,EACRC,EAAM,GAEV,IAAKL,EAAQtD,OAKX,OAJAK,EAAAC,KAAKsD,aAAa1B,mBAAmB,YC1BlB,0QD2BnB7B,EAAAC,KAAK8C,UAAUS,oBAAoB,QAASR,QAC/Bf,SAASC,cAAc,WAC/BuB,UAAUC,IAAI,mBAGNzB,SAASC,cAAc,WAC/BuB,UAAUE,OAAO,mBAExBzF,EAA0B+E,EAAQrD,MAAMyD,EAAOC,IAE/C,IAAMM,EAAY3B,SAASC,cAAc,mBAEtB,IAAI7B,EAAAwD,GAAJ,CAAeD,EAAWV,EAAAC,SAElCW,GAAG,cAAc,SAAAC,GAC1B,IAAMC,EAAcD,EAAME,KAC1BZ,EAAQW,EAAcd,EAAAC,QAAQe,aAAe,GAC7CZ,EAAMU,EAAcd,EAAAC,QAAQe,aAC5B7C,EAAAC,UAAU6C,QAAQH,GAClB3C,EAAAC,UAAU8C,wBACVlG,EAA0B+E,EAAQrD,MAAMyD,EAAOC,G,IAEjD,MAAOe,GACPC,QAAQC,IAAIF,EAAMG,Q,KA+CtBxE,EAAAC,KAAKC,eAAeiC,iBAAkB,S,SAEV1B,G,OAAbL,EAAYwC,MAAAC,KAAAC,U,IEpG3Be,EAAA7F,EAAA,S,iEAgDA,SAASyG,EAAyBtG,GAChC,IAAMC,EAAeD,EAClBE,KAAI,SAAAC,G,IAAGC,EAAcD,EAAdC,eAAgBC,EAAKF,EAALE,MAAOC,EAAWH,EAAXG,YAAaC,EAAEJ,EAAFI,GAAIC,EAAML,EAANK,OAAQC,EAAYN,EAAZM,aAClDC,EAAc,KACdC,EAAc,KAEZC,EAAWJ,EAAON,KAAI,SAAAW,G,OAASA,EAAMN,E,IACrCO,GAAM,EAAAC,EAAA,aAAYT,GAElBU,EAAeC,EAAAC,UAAUC,QAAO,SAACC,EAAKP,GAI1C,OAHID,EAASS,SAASR,EAAMN,KAC1Ba,EAAIE,KAAKT,EAAMU,MAEVH,C,GACN,IAiBH,OAfIJ,EAAaQ,OAAS,GACxBd,EAAcM,EAAaS,MAAM,EAAG,IACxBC,OAAO,EAAG,EAAG,SAEzBhB,EADiC,IAAxBM,EAAaQ,OACR,CAAE,oBAEFR,EAIdL,EADmB,KAAjBF,EACY,wBAEAA,EAAagB,MAAM,EAAG,GAG/B,6CAEOE,OADsBpB,EAAG,0BACMoB,OAA/Bb,EAAI,6BACSa,OADkBvB,EAAe,yCAEjCuB,OADAtB,EAAM,yCACsBsB,OAA5BjB,EAAYkB,KAAM,MAAK,OAAiBD,OAAZhB,EAAY,oB,IAGpEiB,KAAM,IAET,OAAQC,EAAAC,KAAKC,eAAeC,UAAY/B,C,CA/E1C4B,EAAAC,KAAKyE,SAASvC,iBAAiB,SAE/B,SAASwC,IACP,IACE,IAAMC,EAAQtC,KAAKC,MAAMC,aAAaC,QAAQ,UAE9CS,EAAAC,QAAQC,WAAawB,EAAMjF,OAC3B,IAAI0D,EAAQ,EACRC,EAAM,GAEV,IAAKsB,EAAMjF,OAKT,OAJAK,EAAAC,KAAKsD,aAAa1B,mBAAmB,YDnBlB,0QCoBnB7B,EAAAC,KAAKyE,SAASlB,oBAAoB,QAASmB,QAC9B1C,SAASC,cAAc,WAC/BuB,UAAUC,IAAI,mBAGNzB,SAASC,cAAc,WAC/BuB,UAAUE,OAAO,mBAExBc,EAAyBG,EAAMhF,MAAMyD,EAAOC,IAE5C,IAAMM,EAAY3B,SAASC,cAAc,mBAEtB,IAAI7B,EAAAwD,GAAJ,CAAeD,EAAWV,EAAAC,SAElCW,GAAG,cAAc,SAAAC,GAC1B,IAAMC,EAAcD,EAAME,KAC1BZ,EAAQW,EAAcd,EAAAC,QAAQe,aAAe,GAC7CZ,EAAMU,EAAcd,EAAAC,QAAQe,aAC5B7C,EAAAC,UAAU6C,QAAQH,GAClB3C,EAAAC,UAAU8C,wBACVK,EAAyBG,EAAMhF,MAAMyD,EAAOC,G,IAE9C,MAAOe,GACPC,QAAQC,IAAIF,EAAMG,Q","sources":["src/mylibrary.js","src/js/watchedMovies.js","src/js/utilitiesJS/createEmptyLibMessage.js","src/js/queueMovies.js"],"sourcesContent":["import './js/modal';\nimport './js/modal-team';\nimport './js/watchedMovies';\nimport './js/queueMovies';\nimport './js/pagination';\nimport './js/theme-dark';\nimport './js/scrollTop';\n\nimport './js/modal-login';\n\n","import Pagination from 'tui-pagination';\n\nimport { refs } from './utilitiesJS/refs';\nimport { posterСheck } from './utilitiesJS/posterCheck';\nimport { movieDescriptionMurkup } from './descriptionMurkup';\nimport { serverApi } from './utilitiesJS/serverApi';\nimport { onAddQueueClick, onAddWatchClick } from './addFavorites';\nimport { closeModal, onOpenModal } from './modal';\nimport { options } from './pagination';\nimport { genresArr } from './utilitiesJS/genres';\nimport {\n  makeQueueTextContent,\n  makeWatchTextContent,\n} from './utilitiesJS/modalBtnTextContent';\nimport { createMessage } from './utilitiesJS/createEmptyLibMessage';\n\nrefs.btnWathed.addEventListener('click', onBtnWatchedClick);\n\nfunction onBtnWatchedClick() {\n  try {\n    const watched = JSON.parse(localStorage.getItem('watch'));\n\n    options.totalItems = watched.length;\n    let start = 0;\n    let end = 20;\n\n    if (!watched.length) {\n      refs.containerLib.insertAdjacentHTML('beforeend', createMessage());\n      refs.btnWathed.removeEventListener('click', onBtnWatchedClick);\n      const item = document.querySelector('.tui-js');\n      item.classList.add('visually-hidden');\n      return;\n    } else {\n      const item = document.querySelector('.tui-js');\n      item.classList.remove('visually-hidden');\n    }\n    murkupGalleryOnBtnWatched(watched.slice(start, end));\n\n    const container = document.querySelector('.tui-pagination');\n\n    const pagination = new Pagination(container, options);\n\n    pagination.on('beforeMove', event => {\n      const currentPage = event.page;\n      start = currentPage * options.itemsPerPage - 20;\n      end = currentPage * options.itemsPerPage;\n      serverApi.setPage(currentPage);\n      serverApi.incrementRequestCount();\n      murkupGalleryOnBtnWatched(watched.slice(start, end));\n    });\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\nfunction murkupGalleryOnBtnWatched(movies) {\n  const moviesMurkup = movies\n    .map(({ original_title, title, poster_path, id, genres, release_date }) => {\n      let genresMovie = null;\n      let releaseDate = null;\n\n      const genresId = genres.map(genre => genre.id);\n      const src = posterСheck(poster_path);\n\n      const genresMovies = genresArr.reduce((acc, genre) => {\n        if (genresId.includes(genre.id)) {\n          acc.push(genre.name);\n        }\n        return acc;\n      }, []);\n\n      if (genresMovies.length > 3) {\n        genresMovie = genresMovies.slice(0, 2);\n        genresMovie.splice(2, 1, 'Other');\n      } else if (genresMovies.length === 0) {\n        genresMovie = [`Genres not found`];\n      } else {\n        genresMovie = genresMovies;\n      }\n\n      if (release_date === '') {\n        releaseDate = 'Release data no found';\n      } else {\n        releaseDate = release_date.slice(0, 4);\n      }\n\n      return `\n        <li class=\"film__item\" data-id=\"${id}\">\n        <img src=\"${src}\" class=\"film__img\" alt=\"${original_title}\" />\n        <p class=\"film__title\">${title}</p>\n        <p class=\"film__genre\">${genresMovie.join(`, `)} | ${releaseDate}</p>\n      </li>`;\n    })\n    .join(``);\n\n  return (refs.galleryLibrary.innerHTML = moviesMurkup);\n}\n\nrefs.galleryLibrary.addEventListener(`click`, onClickMovie);\n\nasync function onClickMovie(e) {\n  if (e.target.parentElement.className !== 'film__item') {\n    return;\n  }\n\n  onOpenModal();\n  const id = e.target.parentElement.dataset.id;\n\n  const detailsMovie = await serverApi.getDetailsMovie(id);\n\n  const movieMurkup = await movieDescriptionMurkup(detailsMovie);\n\n  refs.movieDescription.insertAdjacentHTML('beforeend', movieMurkup);\n  makeWatchTextContent(detailsMovie);\n  makeQueueTextContent(detailsMovie);\n\n  const watchBtn = document.querySelector('[data-add-watched]');\n  const queueBtn = document.querySelector('[data-add-queue]');\n  const closeModalBtn = document.querySelector('[data-modal-close]');\n\n  watchBtn.addEventListener('click', () => {\n    onAddWatchClick(detailsMovie);\n    const watched = JSON.parse(localStorage.getItem('watch'));\n    murkupGalleryOnBtnWatched(watched);\n  });\n  queueBtn.addEventListener('click', () => {\n    onAddQueueClick(detailsMovie);\n    const queued = JSON.parse(localStorage.getItem('queue'));\n    murkupGalleryOnBtnWatched(queued);\n  });\n  closeModalBtn.addEventListener('click', closeModal);\n}\n","export function createMessage() {\n  const messageMarkup = `<div class=\"message-wrap\">\n      <p class=\"sorry\">Sorry...</p>\n      <p class=\"message\">\n        You haven't added any movies yet. Hope you fix this soon :)\n      </p>\n      <a href=\"/src/index.html\" class=\"library__button accent\">Filmoteka</a>\n    </div>`;\n  return messageMarkup;\n}\n","import Pagination from 'tui-pagination';\n\nimport { refs } from './utilitiesJS/refs';\nimport { posterСheck } from './utilitiesJS/posterCheck';\nimport { serverApi } from './utilitiesJS/serverApi';\nimport { options } from './pagination';\nimport { genresArr } from './utilitiesJS/genres';\nimport { createMessage } from './utilitiesJS/createEmptyLibMessage';\n\nrefs.btnQueue.addEventListener('click', onBtnQueueClick);\n\nfunction onBtnQueueClick() {\n  try {\n    const queue = JSON.parse(localStorage.getItem('queue'));\n\n    options.totalItems = queue.length;\n    let start = 0;\n    let end = 20;\n\n    if (!queue.length) {\n      refs.containerLib.insertAdjacentHTML('beforeend', createMessage());\n      refs.btnQueue.removeEventListener('click', onBtnQueueClick);\n      const item = document.querySelector('.tui-js');\n      item.classList.add('visually-hidden');\n      return;\n    } else {\n      const item = document.querySelector('.tui-js');\n      item.classList.remove('visually-hidden');\n    }\n    murkupGalleryOnBtnQueued(queue.slice(start, end));\n\n    const container = document.querySelector('.tui-pagination');\n\n    const pagination = new Pagination(container, options);\n\n    pagination.on('beforeMove', event => {\n      const currentPage = event.page;\n      start = currentPage * options.itemsPerPage - 20;\n      end = currentPage * options.itemsPerPage;\n      serverApi.setPage(currentPage);\n      serverApi.incrementRequestCount();\n      murkupGalleryOnBtnQueued(queue.slice(start, end));\n    });\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\nfunction murkupGalleryOnBtnQueued(movies) {\n  const moviesMurkup = movies\n    .map(({ original_title, title, poster_path, id, genres, release_date }) => {\n      let genresMovie = null;\n      let releaseDate = null;\n\n      const genresId = genres.map(genre => genre.id);\n      const src = posterСheck(poster_path);\n\n      const genresMovies = genresArr.reduce((acc, genre) => {\n        if (genresId.includes(genre.id)) {\n          acc.push(genre.name);\n        }\n        return acc;\n      }, []);\n\n      if (genresMovies.length > 3) {\n        genresMovie = genresMovies.slice(0, 2);\n        genresMovie.splice(2, 1, 'Other');\n      } else if (genresMovies.length === 0) {\n        genresMovie = [`Genres not found`];\n      } else {\n        genresMovie = genresMovies;\n      }\n\n      if (release_date === '') {\n        releaseDate = 'Release data no found';\n      } else {\n        releaseDate = release_date.slice(0, 4);\n      }\n\n      return `\n        <li class=\"film__item\" data-id=\"${id}\">\n        <img src=\"${src}\" class=\"film__img\" alt=\"${original_title}\" />\n        <p class=\"film__title\">${title}</p>\n        <p class=\"film__genre\">${genresMovie.join(`, `)} | ${releaseDate}</p>\n      </li>`;\n    })\n    .join(``);\n\n  return (refs.galleryLibrary.innerHTML = moviesMurkup);\n}\n"],"names":["parcelRequire","$bpxeT","$51943685a991b61a$var$murkupGalleryOnBtnWatched","movies","moviesMurkup","map","param","original_title","title","poster_path","id","genres","release_date","genresMovie","releaseDate","genresId","genre","src","$9PJ7S","genresMovies","$4zVoc","genresArr","reduce","acc","includes","push","name","length","slice","splice","concat","join","$hiFhO","refs","galleryLibrary","innerHTML","$51943685a991b61a$var$_onClickMovie","$parcel$interopDefault","$2TvXO","mark","_callee","e","detailsMovie","movieMurkup","watchBtn","queueBtn","closeModalBtn","target","parentElement","className","$5xtVg","onOpenModal","dataset","$jaaYu","serverApi","getDetailsMovie","_ctx","sent","$kiFmR","movieDescriptionMurkup","movieDescription","insertAdjacentHTML","$5HOzi","makeWatchTextContent","makeQueueTextContent","document","querySelector","addEventListener","$4cXS4","onAddWatchClick","JSON","parse","localStorage","getItem","onAddQueueClick","closeModal","apply","this","arguments","btnWathed","$51943685a991b61a$var$onBtnWatchedClick","watched","$jcFG7","options","totalItems","start","end","containerLib","removeEventListener","classList","add","remove","container","$1VFfL","on","event","currentPage","page","itemsPerPage","setPage","incrementRequestCount","error","console","log","message","$82e0fb71ed8d4f6d$var$murkupGalleryOnBtnQueued","btnQueue","$82e0fb71ed8d4f6d$var$onBtnQueueClick","queue"],"version":3,"file":"mylibrary.d96a6a07.js.map"}