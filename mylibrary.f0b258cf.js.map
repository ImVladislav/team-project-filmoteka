{"mappings":"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","sources":["src/js/onLibraryClick.js","src/js/watchedMovies.js","src/js/utilitiesJS/markupGllery.js","src/js/utilitiesJS/createEmptyLibMessage.js","src/js/queueMovies.js"],"sourcesContent":["import { refs } from './utilitiesJS/refs';\nimport { createMessage } from './utilitiesJS/createEmptyLibMessage';\nimport { onBtnWatchedClick } from './watchedMovies';\nimport { onBtnQueueClick } from './queueMovies';\nimport { serverApi } from './utilitiesJS/serverApi';\n\nonMyLibraryClick();\n\nfunction onMyLibraryClick() {\n  serverApi.setlang(JSON.parse(localStorage.getItem('language')));\n\n  try {\n    const watch = JSON.parse(localStorage.getItem('watch'));\n    const queue = JSON.parse(localStorage.getItem('queue'));\n\n    if (watch && watch.length !== 0) {\n      onBtnWatchedClick();\n      return;\n    } else if ((queue && queue.length !== 0 && !watch) || watch.length === 0) {\n      onBtnQueueClick();\n      return;\n    } else {\n      refs.galleryLibrary.insertAdjacentHTML('beforeend', createMessage());\n      return;\n    }\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n","import Pagination from 'tui-pagination';\nimport Notiflix from 'notiflix';\nimport { refs } from './utilitiesJS/refs';\nimport { movieDescriptionMurkup } from './descriptionMurkup';\nimport { serverApi } from './utilitiesJS/serverApi';\nimport { onAddQueueClick, onAddWatchClick } from './addFavorites';\nimport { closeModal, onOpenModal } from './modal';\nimport { options } from './pagination';\nimport {\n  makeQueueTextContent,\n  makeWatchTextContent,\n} from './utilitiesJS/modalBtnTextContent';\nimport { handleClick } from './treiler';\nimport { createMessage } from './utilitiesJS/createEmptyLibMessage';\nimport { murkupGallery } from './utilitiesJS/markupGllery';\nimport { markupCast } from './utilitiesJS/markupCast';\n\nrefs.btnWathed.addEventListener('click', onBtnWatchedClick);\n\nexport function onBtnWatchedClick() {\n  refs.btnWathed.dataset.watch = 'active';\n  refs.btnQueue.dataset.queue = '';\n\n  try {\n    const watched = JSON.parse(localStorage.getItem('watch'));\n\n    if (!watched || watched.length === 0) {\n      refs.galleryLibrary.innerHTML = createMessage();\n      refs.tuiContainer.classList.add('visually-hidden');\n      return;\n    } else {\n      options.totalItems = watched.length;\n      let start = 0;\n      let end = 20;\n\n      const handleSlice = currentPage => {\n        start = currentPage * options.itemsPerPage - 20;\n        end = currentPage * options.itemsPerPage;\n      };\n\n      refs.tuiContainer.classList.remove('visually-hidden');\n      murkupGallery(watched.slice(start, end));\n      const pagination = new Pagination(refs.tuiContainer, options);\n\n      pagination.on('beforeMove', event => {\n        const currentPage = event.page;\n        handleSlice(currentPage);\n        murkupGallery(watched.slice(start, end));\n      });\n    }\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\nrefs.galleryLibrary.addEventListener(`click`, onClickMovie);\n\nasync function onClickMovie(e) {\n  if (e.target.parentElement.className !== 'film__item') {\n    return;\n  }\n\n  onOpenModal();\n\n  const id = e.target.parentElement.dataset.id;\n\n  const detailsMovie = await serverApi.getDetailsMovie(id);\n\n  const movieMurkup = await movieDescriptionMurkup(detailsMovie);\n\n  refs.movieDescription.insertAdjacentHTML('beforeend', movieMurkup);\n\n  makeWatchTextContent(detailsMovie);\n  makeQueueTextContent(detailsMovie);\n\n  const watchBtn = document.querySelector('[data-add-watched]');\n  const queueBtn = document.querySelector('[data-add-queue]');\n  const closeModalBtn = document.querySelector('[data-modal-close]');\n  const trailerBtn = document.querySelector('.btn-ytb');\n  const iconTrailerBtn = document.querySelector('.icon-youtube');\n  const castBtn = document.querySelector('[data-cast]');\n\n  watchBtn.addEventListener('click', () => {\n    onAddWatchClick(detailsMovie);\n    const watched = JSON.parse(localStorage.getItem('watch'));\n\n    if (refs.btnWathed.dataset.watch === 'active') {\n      murkupGallery(watched);\n    }\n  });\n\n  queueBtn.addEventListener('click', () => {\n    onAddQueueClick(detailsMovie);\n    const queued = JSON.parse(localStorage.getItem('queue'));\n\n    if (refs.btnQueue.dataset.queue === 'active') {\n      murkupGallery(queued);\n    }\n  });\n\n  serverApi.getTrailer(id).then(({ results }) => {\n    if (results.length !== 0) {\n      iconTrailerBtn.classList.add('icon-youtube__enable');\n      iconTrailerBtn.classList.remove('icon-youtube__disabled');\n    } else {\n      iconTrailerBtn.classList.remove('icon-youtube__enable');\n      iconTrailerBtn.classList.add('icon-youtube__disabled');\n      trailerBtn.setAttribute('disabled', true);\n      Notiflix.Notify.failure('Oh! Unfortunately there is no trailer', {\n        position: 'center-top',\n        fontFamily: 'inherit',\n        borderRadius: '25px',\n        clickToClose: true,\n      });\n    }\n  });\n\n  serverApi.getCasts(id).then(data => {\n    if (data.length === 0) {\n      castBtn.setAttribute('disabled', true);\n    }\n  });\n\n  trailerBtn.addEventListener('click', handleClick);\n  castBtn.addEventListener('click', () => markupCast(id));\n  closeModalBtn.addEventListener('click', closeModal);\n}\n","import { refs } from './refs';\nimport { posterСheck } from './posterCheck';\nimport { genresArr, genresUK } from './genres';\nimport { createMessage } from './createEmptyLibMessage';\n\nexport function murkupGallery(movies) {\n  if (!movies.length) {\n    refs.tuiContainer.classList.add('visually-hidden');\n    return (refs.galleryLibrary.innerHTML = createMessage());\n  }\n\n  const moviesMurkup = movies\n    .map(({ original_title, title, poster_path, id, genres, release_date }) => {\n      let genresMovie = null;\n      let releaseDate = null;\n      let genresMovies = null;\n\n      const currentLanguage = JSON.parse(localStorage.getItem('language'));\n      const genresId = genres.map(genre => genre.id);\n      const src = posterСheck(poster_path);\n\n      if (currentLanguage === 'uk') {\n        genresMovies = genresUK.reduce((acc, genre) => {\n          if (genresId.includes(genre.id)) {\n            acc.push(genre.name);\n          }\n          return acc;\n        }, []);\n\n        if (genresMovies.length > 3) {\n          genresMovie = genresMovies.slice(0, 2);\n          genresMovie.splice(2, 1, 'Інше');\n        } else if (genresMovies.length === 0) {\n          genresMovie = [`Жанрів не знайдено`];\n        } else {\n          genresMovie = genresMovies;\n        }\n\n        if (release_date === '') {\n          releaseDate = 'Дату релізу не знайдено';\n        } else {\n          releaseDate = release_date.slice(0, 4);\n        }\n      } else {\n        genresMovies = genresArr.reduce((acc, genre) => {\n          if (genresId.includes(genre.id)) {\n            acc.push(genre.name);\n          }\n          return acc;\n        }, []);\n\n        if (genresMovies.length > 3) {\n          genresMovie = genresMovies.slice(0, 2);\n          genresMovie.splice(2, 1, 'Other');\n        } else if (genresMovies.length === 0) {\n          genresMovie = [`Genres not found`];\n        } else {\n          genresMovie = genresMovies;\n        }\n\n        if (release_date === '') {\n          releaseDate = 'Release data no found';\n        } else {\n          releaseDate = release_date.slice(0, 4);\n        }\n      }\n\n      return `\n          <li class=\"film__item\" data-id=\"${id}\">\n          <img src=\"${src}\" class=\"film__img\" alt=\"${original_title}\" />\n          <p class=\"film__title\">${title}</p>\n          <p class=\"film__genre\">${genresMovie.join(`, `)} | ${releaseDate}</p>\n        </li>`;\n    })\n    .join(``);\n\n  return (refs.galleryLibrary.innerHTML = moviesMurkup);\n}\n","export function createMessage() {\n  const messageMarkup = `<div class=\"message-wrap\" >\n      <p class=\"sorry\">Sorry...</p>\n      <p class=\"message\">\n        You haven't added any movies yet. Hope you fix this soon :)\n      </p>\n      <a href=\"/src/index.html\" class=\"library__button accent\">Filmoteka</a>\n    </div>`;\n  return messageMarkup;\n}\n","import Pagination from 'tui-pagination';\n\nimport { refs } from './utilitiesJS/refs';\nimport { options } from './pagination';\nimport { createMessage } from './utilitiesJS/createEmptyLibMessage';\nimport { murkupGallery } from './utilitiesJS/markupGllery';\n\nrefs.btnQueue.addEventListener('click', onBtnQueueClick);\n\nexport function onBtnQueueClick() {\n  refs.btnWathed.dataset.watch = '';\n  refs.btnQueue.dataset.queue = 'active';\n\n  try {\n    const queue = JSON.parse(localStorage.getItem('queue'));\n\n    if (!queue || queue.length === 0) {\n      refs.galleryLibrary.innerHTML = createMessage();\n      refs.tuiContainer.classList.add('visually-hidden');\n      return;\n    } else {\n      options.totalItems = queue.length;\n      let start = 0;\n      let end = 20;\n\n      const handleSlice = currentPage => {\n        start = currentPage * options.itemsPerPage - 20;\n        end = currentPage * options.itemsPerPage;\n      };\n\n      refs.tuiContainer.classList.remove('visually-hidden');\n      murkupGallery(queue.slice(start, end));\n\n      const pagination = new Pagination(refs.tuiContainer, options);\n\n      pagination.on('beforeMove', event => {\n        const currentPage = event.page;\n        handleSlice(currentPage);\n        murkupGallery(queue.slice(start, end));\n      });\n    }\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n"],"names":["$hiFhO","parcelRequire","$bpxeT","$680787a72f3ad581$export$6bb355015a1580b","movies","length","refs","tuiContainer","classList","add","galleryLibrary","innerHTML","moviesMurkup","map","param","original_title","title","poster_path","id","genres","release_date","genresMovie","releaseDate","genresMovies","currentLanguage","JSON","parse","localStorage","getItem","genresId","genre","src","$9PJ7S","$4zVoc","genresUK","reduce","acc","includes","push","name","slice","splice","genresArr","concat","join","$51943685a991b61a$export$e3cd2a9e9061f2c1","btnWathed","dataset","watch","btnQueue","queue","watched","$jcFG7","options","totalItems","start","end","remove","$parcel$interopDefault","$1VFfL","on","event","currentPage","itemsPerPage","handleSlice","page","error","console","log","message","$51943685a991b61a$var$_onClickMovie","$2TvXO","mark","_callee","e","detailsMovie","movieMurkup","watchBtn","queueBtn","closeModalBtn","trailerBtn","iconTrailerBtn","castBtn","target","parentElement","className","$5xtVg","onOpenModal","$jaaYu","serverApi","getDetailsMovie","_ctx","sent","$kiFmR","movieDescriptionMurkup","movieDescription","insertAdjacentHTML","$5HOzi","makeWatchTextContent","makeQueueTextContent","document","querySelector","addEventListener","$4cXS4","onAddWatchClick","onAddQueueClick","queued","getTrailer","then","results","setAttribute","$iU1Pc","Notify","failure","position","fontFamily","borderRadius","clickToClose","getCasts","data","$dkUq4","handleClick","$3TKAW","markupCast","closeModal","apply","this","arguments","$82e0fb71ed8d4f6d$export$b055216bf7aaa057","setlang","$0f34ab67201c3500$var$onMyLibraryClick"],"version":3,"file":"mylibrary.f0b258cf.js.map"}